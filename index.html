<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.36.1">
<meta name="crystal_docs.project_version" content="0.1.3">
<meta name="crystal_docs.project_name" content="public_suffix">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="public_suffix">
  <title>public_suffix 0.1.3</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          public_suffix
        </a>
      </h1>

      <span class="project-version">
        0.1.3
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="public_suffix/PublicSuffix" data-name="publicsuffix">
      <a href="PublicSuffix.html">PublicSuffix</a>
      
        <ul>
  
  <li class=" " data-id="public_suffix/PublicSuffix/CachedList" data-name="publicsuffix::cachedlist">
      <a href="PublicSuffix/CachedList.html">CachedList</a>
      
    </li>
  
  <li class="parent " data-id="public_suffix/PublicSuffix/Parser" data-name="publicsuffix::parser">
      <a href="PublicSuffix/Parser.html">Parser</a>
      
        <ul>
  
  <li class="parent " data-id="public_suffix/PublicSuffix/Parser/Term" data-name="publicsuffix::parser::term">
      <a href="PublicSuffix/Parser/Term.html">Term</a>
      
        <ul>
  
  <li class=" " data-id="public_suffix/PublicSuffix/Parser/Term/Type" data-name="publicsuffix::parser::term::type">
      <a href="PublicSuffix/Parser/Term/Type.html">Type</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1><a id="public-suffix" class="anchor" href="#public-suffix">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>public_suffix</h1>

<p><a href="https://github.com/toddsundsted/public_suffix/releases"><img src="https://img.shields.io/github/release/toddsundsted/public_suffix.svg" alt="GitHub Release"/></a>
<a href="https://travis-ci.org/toddsundsted/public_suffix"><img src="https://travis-ci.org/toddsundsted/public_suffix.svg?branch=master" alt="Build Status"/></a>
<a href="https://toddsundsted.github.io/public_suffix/"><img src="https://img.shields.io/badge/docs-available-brightgreen.svg" alt="Documentation"/></a></p>

<p>The <a href="https://publicsuffix.org/">Public Suffix List</a> is "a cross-vendor
initiative to provide an accurate list of domain name suffixes". Such
a list is necessary because "there was and remains no algorithmic
method of finding the highest level at which a domain may be
registered for a particular top-level domain...".</p>

<p><code>public_suffix</code> is a small Crystal library designed to make the Public
Suffix List easier to use. The library will transparently download the
latest list of rules, parse the rules, and optionally cache
them. Source URL, cache directory, and cache expiry are all
configurable.</p>

<p>The public API is as simple as I could make it.  Instantiating the
<code><a href="PublicSuffix.html">PublicSuffix</a></code> class creates a new instance with reasonable defaults
(downloads and caches the official list of rules for 30 days).</p>

<p>There are three instance methods:</p>

<ul><li><code>PublicSuffix#tld</code> returns the top-level domain name</li><li><code>PublicSuffix#cdn</code> returns the canonical domain name</li><li><code>PublicSuffix#split</code>splits the domain name into parts</li></ul>

<h2><a id="features" class="anchor" href="#features">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Features</h2>

<ul><li>Transparent download of the official domain rules file</li><li>Optional caching of domain rules data, with refetch upon expiry</li><li>Tiny API</li></ul>

<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h2>

<ol><li>Add the dependency to your <code>shard.yml</code>:</li></ol>

<pre><code class="language-crystal">   dependencies:
     public_suffix:
       github: toddsundsted/public_suffix</code></pre>

<ol><li>Run <code>shards install</code></li></ol>

<h2><a id="synopsis" class="anchor" href="#synopsis">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Synopsis</h2>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;public_suffix&quot;</span>

<span class="c"># Downloads and parses the latest data file and returns</span>
<span class="c"># the top-level domain name</span>
<span class="t">PublicSuffix</span>.<span class="k">new</span>.tld(<span class="s">&quot;foobar.com&quot;</span>) <span class="c"># =&gt; &quot;com&quot;</span>

<span class="c"># Downloads and parses the latest data file and returns</span>
<span class="c"># the canonical domain name</span>
<span class="t">PublicSuffix</span>.<span class="k">new</span>.cdn(<span class="s">&quot;foobar.com&quot;</span>) <span class="c"># =&gt; &quot;foobar.com&quot;</span>

<span class="c"># Downloads and parses the latest data file, caches it in /tmp,</span>
<span class="c"># and splits the domain name into parts</span>
<span class="t">PublicSuffix</span>.<span class="k">new</span>(cache_dir: <span class="s">&quot;/tmp&quot;</span>).split(<span class="s">&quot;abc.xyz.co.uk&quot;</span>) <span class="c"># =&gt; [&quot;abc&quot;, &quot;xyz&quot;, &quot;co.uk&quot;].</span>

<span class="c"># Downloads and caches data in /tmp if it is less than</span>
<span class="c"># 100 seconds old, parses it, and splits the domain name</span>
<span class="c"># into parts</span>
<span class="t">PublicSuffix</span>.<span class="k">new</span>(cache_dir: <span class="s">&quot;/tmp&quot;</span>, cache_expiry_period: <span class="n">100</span>).split(<span class="s">&quot;test.parliament.uk&quot;</span>) <span class="c"># =&gt; [&quot;test&quot;, &quot;parliament&quot;, &quot;uk&quot;]</span>

<span class="c"># You don&#39;t have to instantiate PublicSuffix every time you use it</span>
p <span class="o">=</span> <span class="t">PublicSuffix</span>.<span class="k">new</span>
p.split(<span class="s">&quot;fee.fi.fo.com&quot;</span>) <span class="c"># =&gt; [&quot;fee.fi&quot;, &quot;fo&quot;, &quot;com&quot;]</span>
p.cdn(<span class="s">&quot;fee.fi.fo.com&quot;</span>)   <span class="c"># =&gt; &quot;fo.com&quot;, &quot;cdn&quot; means &quot;canonical domain name&quot;</span>
p.tld(<span class="s">&quot;fee.fi.fo.com&quot;</span>)   <span class="c"># =&gt; &quot;com&quot;, &quot;tld&quot; means &quot;top-level domain&quot;</span>

<span class="c"># You can even use other data files, both local and remote</span>
<span class="c"># (as long as they conform to the Public Suffix List file format)</span>
<span class="t">PublicSuffix</span>.<span class="k">new</span>(url: <span class="s">&quot;file://./spec/test.dat&quot;</span>)</code></pre>

<h2><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h2>

<ol><li>Fork it (&lt;https://github.com/toddsundsted/public_suffix/fork>)</li><li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li><li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li><li>Push to the branch (<code>git push origin my-new-feature</code>)</li><li>Create a new Pull Request</li></ol>

<h2><a id="contributors" class="anchor" href="#contributors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributors</h2>

<ul><li><a href="https://github.com/toddsundsted">Todd Sundsted</a> - creator and maintainer</li></ul>
</div>
</body>
</html>
